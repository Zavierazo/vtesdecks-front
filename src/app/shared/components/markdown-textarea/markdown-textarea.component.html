<ng-container *transloco="let t; read:'markdown-textarea'">
  <div>
    <div class="btn-group">
      <div ngbDropdown class="btn-group">
        <button type="button" class="btn btn-sm" id="disciplineDropdown" [disabled]="previewDescription()"
          [title]="t('discipline')" ngbDropdownToggle>
          <i class="vtes-small dominate"></i>
        </button>
        <div ngbDropdownMenu aria-labelledby="disciplineDropdown">
          <div class="d-flex flex-row flex-wrap">
            @for(discipline of disciplines; track discipline){
            <button class="w-25 d-flex justify-content-center" ngbDropdownItem (click)="onDiscipline(discipline)">
              <i class="vtes-small" [ngClass]="discipline.icon"></i>
            </button>
            }
          </div>
        </div>
      </div>
      <div ngbDropdown class="btn-group">
        <button type="button" class="btn btn-sm" id="clanDropdown" [disabled]="previewDescription()" [title]="t('clan')"
          ngbDropdownToggle>
          <i class="vtes-small gangrel"></i>
        </button>
        <div ngbDropdownMenu aria-labelledby="clanDropdown">
          <div class="d-flex flex-row flex-wrap">
            @for(clan of clans; track clan){
            <button class="w-25 d-flex justify-content-center" ngbDropdownItem (click)="onClan(clan)">
              <i class="vtes-small" [ngClass]="clan.icon"></i>
            </button>
            }
          </div>
        </div>
      </div>
      <button type="button" class="btn btn-sm" [disabled]="previewDescription()" [title]="t('bold')" (click)="onBold()">
        <i class="btn-icon bi bi-type-bold bi-fs-1_2x"></i>
      </button>
      <button type="button" class="btn btn-sm" [disabled]="previewDescription()" [title]="t('italic')"
        (click)="onItalic()">
        <i class="btn-icon bi bi-type-italic bi-fs-1_2x"></i>
      </button>
      <button type="button" class="btn btn-sm" [disabled]="previewDescription()" [title]="t('strikethrough')"
        (click)="onStrikethrough()">
        <i class="btn-icon bi bi-type-strikethrough bi-fs-1_2x"></i>
      </button>
      <button type="button" class="btn btn-sm" [disabled]="previewDescription()" [title]="t('title')"
        (click)="onTitle()">
        <i class="btn-icon bi bi-type-h1 bi-fs-1_2x"></i>
      </button>
      <button type="button" class="btn btn-sm" [disabled]="previewDescription()" [title]="t('link')" (click)="onLink()">
        <i class="btn-icon bi bi-link-45deg bi-fs-1_2x"></i>
      </button>
    </div>
    <div class="btn-group">
      <button type="button" class="btn btn-sm" [disabled]="previewDescription()" [title]="t('image')"
        (click)="onImage()">
        <i class="btn-icon bi bi-image bi-fs-1_2x"></i>
      </button>
      <button type="button" class="btn btn-sm" [disabled]="previewDescription()" [title]="t('number_list')"
        (click)="onList(true)">
        <i class="btn-icon bi bi-list-ol bi-fs-1_2x"></i>
      </button>
      <button type="button" class="btn btn-sm" [disabled]="previewDescription()" [title]="t('dot_list')"
        (click)="onList(false)">
        <i class="btn-icon bi bi-list-task bi-fs-1_2x"></i>
      </button>
      <button type="button" class="btn btn-sm" [disabled]="previewDescription()" [title]="t('code')" (click)="onCode()">
        <i class="btn-icon bi bi-code bi-fs-1_2x"></i>
      </button>
      <button type="button" class="btn btn-sm" [disabled]="previewDescription()" [title]="t('quote')"
        (click)="onQuote()">
        <i class="btn-icon bi bi-quote bi-fs-1_2x"></i>
      </button>
      <button type="button" class="btn btn-sm" [disabled]="previewDescription()" [title]="t('table')"
        (click)="onTable()">
        <i class="btn-icon bi bi-table bi-fs-1_2x"></i>
      </button>
      <button type="button" class="btn btn-sm" [title]="t('help')" (click)="onHelp()">
        <i class="btn-icon bi bi-question-lg bi-fs-1_2x"></i>
      </button>
    </div>
    <button type="button" class="btn btn-primary btn-sm" (click)="onPreviewDescription()">
      <i class="bi bi-search me-2"></i>
      {{ t('preview') }}
    </button>
  </div>
  @if(previewDescription()){
  <app-markdown-text class="mt-3" [data]="description" />
  } @else{
  <div class="form-floating">
    <textarea #ref class="form-control w-vw-100 markdown-textarea" id="description" type="text"
      [placeholder]="placeholderWithExample" [formControl]="control()"></textarea>
    <label for="description">{{ label() }}</label>
  </div>
  }
</ng-container>