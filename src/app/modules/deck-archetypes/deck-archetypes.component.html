<ng-container *transloco="let t; prefix: 'deck_archetype'">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0 text-start">{{ t('title') }}</h3>
    @if (isAdmin$ | async) {
    <button class="btn btn-sm btn-primary" (click)="openModal()">
      {{ t('create') }}
    </button>
    }
  </div>

  <div class="row g-3 card-deck-archetype">
    @if(archetypes$ | async; as archetypes){
    @for (archetype of archetypes; track archetype.id) {
    <div class="col-12 col-sm-6 col-md-4">
      <div class="card h-100">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title d-flex flex-row align-items-center justify-content-start">
            @if (archetype.icon) {
            <span class="me-2">
              <i class="vtes" [class]="archetype.icon"></i>
            </span>
            }
            <span>{{ archetype.name }}</span>
            @if (isAdmin$ | async) {
            @if (archetype.enabled) {
            <span class="text-success ms-2">âœ“</span>
            } @else {
            <span class="text-danger ms-2">X</span>
            }
            }
          </h5>
          <h6 class="card-subtitle mb-2 text-muted small">{{ archetype.type }}</h6>
          <div class="card-text mb-3 text-muted small description-preview">
            <app-markdown-text [data]="archetype.description"></app-markdown-text>
          </div>
          <div class="mt-auto d-flex justify-content-between align-items-center">
            <div>
              @if(archetype.deckId){
              <a class="btn btn-sm btn-primary" [routerLink]="['/deck', archetype.deckId]">
                {{ t('view_archetype_deck') }}
              </a>
              }
            </div>
            <div class="d-flex align-items-center gap-2">
              <a class="btn btn-sm btn-outline-primary" [routerLink]="['/decks']"
                [queryParams]="{ archetype: archetype.id }">
                {{ t('decks_with_archetype') }}
              </a>
              <div class="d-flex align-items-center">
                @if (isAdmin$ | async) {
                <button class="btn btn-sm btn-outline-secondary me-2" (click)="openModal(archetype)">
                  {{ t('shared.edit') }}
                </button>
                <button class="btn btn-sm btn-outline-danger" (click)="delete(archetype)">
                  {{ t('shared.delete') }}
                </button>
                }
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    }
    }
  </div>
</ng-container>